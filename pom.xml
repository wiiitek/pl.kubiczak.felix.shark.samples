<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
		 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>

	<parent>
		<artifactId>parent</artifactId>
		<groupId>pl.kubiczak.felix.shark</groupId>
		<version>1.6-SNAPSHOT</version>
		<relativePath>../parent/pom.xml</relativePath>
	</parent>

	<artifactId>samples</artifactId>
	<version>1.3-SNAPSHOT</version>
	<packaging>pom</packaging>

	<name>Shark: Samples</name>
	<url>https://shark.kubiczak.pl/samples</url>

	<modules>
		<module>http</module>
		<module>ioc</module>
		<module>security</module>
	</modules>

	<scm>
		<connection>scm:git:https://github.com/wiiitek/pl.kubiczak.felix.shark.samples.git</connection>
		<developerConnection>scm:git:git@github.com:wiiitek/pl.kubiczak.felix.shark.samples.git</developerConnection>
		<url>https://github.com/wiiitek/pl.kubiczak.felix.shark.samples/tree/${project.scm.tag}</url>
	</scm>
	<distributionManagement>
		<site>
			<id>ftp.shark.kubiczak.pl</id>
			<url>ftp://shark.kubiczak.pl/samples</url>
		</site>
	</distributionManagement>

	<properties>
		<bundles.deploy.dir>load/level-20-samples</bundles.deploy.dir>
	</properties>

	<dependencyManagement>
		<dependencies>
			<dependency>
				<groupId>pl.kubiczak.felix.shark</groupId>
				<artifactId>dependencies</artifactId>
				<version>1.6-SNAPSHOT</version>
				<type>pom</type>
				<scope>import</scope>
			</dependency>
		</dependencies>
	</dependencyManagement>

	<repositories>
		<repository>
			<id>maven.kubiczak.pl</id>
			<url>http://maven.kubiczak.pl</url>
		</repository>
	</repositories>

	<build>
		<finalName>${project.groupId}-${project.artifactId}-${project.version}</finalName>
	</build>

	<profiles>
		<profile>
			<id>deploy-samples-to-felix-framework</id>
			<activation>
				<property>
					<name>env.SHARK_HOME</name>
				</property>
			</activation>
			<build>
				<plugins>
					<plugin>
						<groupId>org.apache.maven.plugins</groupId>
						<artifactId>maven-resources-plugin</artifactId>
						<executions>
							<execution>
								<id>deploy-sample-bundle-to-felix-framework</id>
								<phase>install</phase>
								<goals>
									<goal>copy-resources</goal>
								</goals>
								<configuration>
									<resources>
										<resource>
											<directory>${project.build.directory}</directory>
											<includes>
												<include>*.jar</include>
											</includes>
										</resource>
									</resources>
									<outputDirectory>${env.SHARK_HOME}/${felix.dir}/${bundles.deploy.dir}
									</outputDirectory>
								</configuration>
							</execution>
						</executions>
					</plugin>
				</plugins>
			</build>
		</profile>
	</profiles>
</project>
